import{_ as t,o as e,c as a,w as s,b as i,n as l,d as o,u as n,v as c,t as r,K as d,F as u,a7 as h,ap as p,f as m,x as g,e as f,aa as b,a1 as w,ae as _,S as y,A,z as x}from"./index-BmzQcWuq.js";const T={data0:{datetime:"40分钟前",article_type:0,title:"uni-app行业峰会频频亮相，开发者反响热烈!",source:"DCloud",comment_count:639},data1:{datetime:"一天前",article_type:1,title:"DCloud完成B2轮融资，uni-app震撼发布!",image_url:"https://web-assets.dcloud.net.cn/unidoc/zh/shuijiao-small.jpg",source:"DCloud",comment_count:11395},data2:{datetime:"一天前",article_type:2,title:"中国技术界小奇迹：HBuilder开发者突破200万",image_url:"https://web-assets.dcloud.net.cn/unidoc/zh/muwu-samll.jpg",source:"DCloud",comment_count:11395},data3:{article_type:3,image_list:[{url:"https://web-assets.dcloud.net.cn/unidoc/zh/cbd%20-small.jpg",width:563,height:316},{url:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-dc-site/b4cd3000-517d-11eb-a16f-5b3e54966275.jpg",width:641,height:360},{url:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-dc-site/b7c7f970-517d-11eb-97b7-0dc4655d6e68.jpg",width:640,height:360}],datetime:"5分钟前",title:"uni-app 支持使用 npm 安装第三方包，生态更趋丰富",source:"DCloud",comment_count:11},data4:{datetime:"2小时前",article_type:4,title:"uni-app 支持原生小程序自定义组件，更开放、更自由",image_url:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-dc-site/b2e201d0-517d-11eb-8a36-ebb87efcf8c0.jpg",source:"DCloud",comment_count:69}};const v=t({components:{mediaItem:t({props:{options:{type:Object,default:function(t){return{}}}},methods:{click(){this.$emit("click")},close(t){this.$emit("close")}}},[["render",function(t,b,w,_,y,A){const x=m,T=g,v=f;return w.options.title?(e(),a(v,{key:0,class:"media-item view","hover-class":"media-item-hover",onClick:A.click},{default:s((()=>[i(v,{class:"view",style:h({flexDirection:1===w.options.article_type||2===w.options.article_type?2===w.options.article_type?"row":"row-reverse":"column"})},{default:s((()=>[i(x,{class:l(["media-title",{"media-title2":1===w.options.article_type||2===w.options.article_type}])},{default:s((()=>[o(n(w.options.title),1)])),_:1},8,["class"]),w.options.image_list||w.options.image_url?(e(),a(v,{key:0,class:l(["image-section flex-row",{"image-section-right":2===w.options.article_type,"image-section-left":1===w.options.article_type}]),style:{flexDirection:"row"}},{default:s((()=>[w.options.image_url?(e(),a(T,{key:0,class:l(["image-list1",{"image-list2":1===w.options.article_type||2===w.options.article_type}]),src:w.options.image_url},null,8,["class","src"])):c("",!0),w.options.image_list?(e(!0),r(u,{key:1},d(w.options.image_list,((t,s)=>(e(),a(T,{class:"image-list3",src:t.url,key:s},null,8,["src"])))),128)):c("",!0)])),_:1},8,["class"])):c("",!0)])),_:1},8,["style"]),i(v,{class:"media-foot flex-row",style:{"flex-direction":"row"}},{default:s((()=>[i(v,{class:"media-info flex-row",style:{"flex-direction":"row"}},{default:s((()=>[i(x,{class:"info-text"},{default:s((()=>[o(n(w.options.source),1)])),_:1}),i(x,{class:"info-text"},{default:s((()=>[o(n(w.options.comment_count)+"条评论",1)])),_:1}),i(x,{class:"info-text"},{default:s((()=>[o(n(w.options.datetime),1)])),_:1})])),_:1}),i(v,{class:"max-close-view",onClick:p(A.close,["stop"])},{default:s((()=>[i(v,{class:"close-l close-h"}),i(v,{class:"close-l close-v"})])),_:1},8,["onClick"])])),_:1}),i(v,{class:"media-item-line",style:{position:"absolute"}})])),_:1},8,["onClick"])):c("",!0)}],["__scopeId","data-v-7815c92e"]])},data:()=>({newsList:[],cacheTab:[],tabIndex:0,tabBars:[{name:"关注",id:"guanzhu"},{name:"推荐",id:"tuijian"},{name:"体育",id:"tiyu"},{name:"热点",id:"redian"},{name:"财经",id:"caijing"},{name:"娱乐",id:"yule"},{name:"军事",id:"junshi"},{name:"历史",id:"lishi"},{name:"本地",id:"bendi"}],scrollInto:"",showTips:!1,navigateFlag:!1,pulling:!1,refreshIcon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAB5QTFRFcHBw3Nzct7e39vb2ycnJioqK7e3tpqam29vb////D8oK7wAAAAp0Uk5T////////////ALLMLM8AAABxSURBVHja7JVBDoAgDASrjqj//7CJBi90iyYeOHTPMwmFZrHjYyyFYYUy1bwUZqtJIYVxhf1a6u0R7iUvWsCcrEtwJHp8MwMdvh2amHduiZD3rpWId9+BgPd7Cc2LIkPyqvlQvKxKBJ//Qwq/CacAAwDUv0a0YuKhzgAAAABJRU5ErkJggg=="}),onLoad(){setTimeout((()=>{this.tabBars.forEach((t=>{this.newsList.push({data:[],isLoading:!1,refreshText:"",loadingText:"加载更多..."})})),this.getList(0)}),350)},methods:{getList(t){let e=this.newsList[t],a=[];for(let s=1;s<=10;s++){let t=Object.assign({},T["data"+Math.floor(5*Math.random())]);t.id=this.newGuid(),a.push(t)}e.data=e.data.concat(a)},goDetail(t){this.navigateFlag||(this.navigateFlag=!0,b({url:"./detail/detail?title="+t.title}),setTimeout((()=>{this.navigateFlag=!1}),200))},close(t,e){w({content:"是否删除本条信息？",success:a=>{a.confirm&&this.newsList[t].data.splice(e,1)}})},loadMore(t){setTimeout((()=>{this.getList(this.tabIndex)}),500)},ontabtap(t){let e=t.target.dataset.current||t.currentTarget.dataset.current;this.switchTab(e)},ontabchange(t){let e=t.target.current||t.detail.current;this.switchTab(e)},switchTab(t){if(0===this.newsList[t].data.length&&this.getList(t),this.tabIndex!==t){if(this.newsList[this.tabIndex].data.length>100){this.cacheTab.indexOf(this.tabIndex)<0&&this.cacheTab.push(this.tabIndex)}if(this.tabIndex=t,this.scrollInto=this.tabBars[t].id,this.cacheTab.length>3){let t=this.cacheTab[0];this.clearTabData(t),this.cacheTab.splice(0,1)}}},clearTabData(t){this.newsList[t].data.length=0,this.newsList[t].loadingText="加载更多..."},refreshData(){},onrefresh(t){var e=this.newsList[this.tabIndex];e.refreshFlag&&(e.refreshing=!0,e.refreshText="正在刷新...",setTimeout((()=>{this.refreshData(),this.pulling=!0,e.refreshing=!1,e.refreshFlag=!1,e.refreshText="已刷新",setTimeout((()=>{this.pulling=!1}),500)}),2e3))},onpullingdown(t){var e=this.newsList[this.tabIndex];e.refreshing||this.pulling||(Math.abs(t.pullingDistance)>Math.abs(t.viewHeight)?(e.refreshFlag=!0,e.refreshText="释放立即刷新"):(e.refreshFlag=!1,e.refreshText="下拉可以刷新"))},newGuid(){let t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return(t()+t()+"-"+t()+"-4"+t().substr(0,3)+"-"+t()+"-"+t()+t()+t()).toUpperCase()}}},[["render",function(t,h,p,g,b,w){const T=m,v=f,k=y,C=_("media-item"),L=x,B=A;return e(),a(v,{class:"tabs"},{default:s((()=>[i(k,{id:"tab-bar",class:"scroll-h","scroll-x":!0,"show-scrollbar":!1,"scroll-into-view":b.scrollInto},{default:s((()=>[(e(!0),r(u,null,d(b.tabBars,((t,c)=>(e(),a(v,{key:t.id,class:"uni-tab-item",id:t.id,"data-current":c,onClick:w.ontabtap},{default:s((()=>[i(T,{class:l(["uni-tab-item-title",b.tabIndex==c?"uni-tab-item-title-active":""])},{default:s((()=>[o(n(t.name),1)])),_:2},1032,["class"])])),_:2},1032,["id","data-current","onClick"])))),128))])),_:1},8,["scroll-into-view"]),i(v,{class:"line-h"}),i(B,{current:b.tabIndex,class:"swiper-box",style:{flex:"1"},duration:300,onChange:w.ontabchange},{default:s((()=>[(e(!0),r(u,null,d(b.newsList,((t,l)=>(e(),a(L,{class:"swiper-item",key:l},{default:s((()=>[i(k,{class:"scroll-v list",enableBackToTop:"true","scroll-y":"",onScrolltolower:t=>w.loadMore(l)},{default:s((()=>[(e(!0),r(u,null,d(t.data,((t,o)=>(e(),a(v,{key:t.id},{default:s((()=>[i(C,{options:t,onClose:t=>w.close(l,o),onClick:e=>w.goDetail(t)},null,8,["options","onClose","onClick"])])),_:2},1024)))),128)),t.isLoading||t.data.length>4?(e(),a(v,{key:0,class:"loading-more"},{default:s((()=>[i(T,{class:"loading-more-text"},{default:s((()=>[o(n(t.loadingText),1)])),_:2},1024)])),_:2},1024)):c("",!0)])),_:2},1032,["onScrolltolower"])])),_:2},1024)))),128))])),_:1},8,["current","onChange"])])),_:1})}],["__scopeId","data-v-b6f426af"]]);export{v as default};
